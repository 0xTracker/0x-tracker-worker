const normalizeFillArgs = require('./normalize-fill-args');

describe('normalizeFillArgs', () => {
  it('should normalize args for V2 event with recognized assets', () => {
    const event = {
      _id: '5bb1f16862f9ca0004c7cfb7',
      blockNumber: 6363524,
      data: {
        address: '0x4f833a24e1f95d70f028921e27040ca56e09ab0b',
        blockHash:
          '0xdb670f0c4934f24a62928ab9c676d4e24b7d7f0d1467c696c82c1789571da3af',
        blockNumber: 6363524,
        data:
          '0x000000000000000000000000f3f694cbe3a1042a886ce923fab00ca649e6a89b000000000000000000000000f3f694cbe3a1042a886ce923fab00ca649e6a89b000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000005af3107a4000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000018000000000000000000000000000000000000000000000000000000000000000440257179200000000000000000000000006012c8cf97bead5deae237070f9587f8e7a266d00000000000000000000000000000000000000000000000000000000000d29fe000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000024f47261b0000000000000000000000000e41d2489571d322189246dafa5ebde1f4699f49800000000000000000000000000000000000000000000000000000000',
        logIndex: 91,
        removed: false,
        topics: [
          '0x0bcc4c97732e47d9946f229edb95f5b6323f601300e4690de719993f3c371129',
          '0x0000000000000000000000005b50fb8281cb679a3102d3de22dd05a1ad895e8f',
          '0x0000000000000000000000000000000000000000000000000000000000000000',
          '0xb0d28d8c36f40322408b3ff4ac41d2bf6ac6c834633763d3b42831d50e30b455',
        ],
        transactionHash:
          '0x266b911f58bc4138616d1e37dcd9829a5f502322b09f99d48d4610e25d6a1e0d',
        transactionIndex: 107,
        event: 'Fill',
        args: {
          makerAddress: '0x5b50fb8281cb679a3102d3de22dd05a1ad895e8f',
          feeRecipientAddress: '0x0000000000000000000000000000000000000000',
          takerAddress: '0xf3f694cbe3a1042a886ce923fab00ca649e6a89b',
          senderAddress: '0xf3f694cbe3a1042a886ce923fab00ca649e6a89b',
          makerAssetFilledAmount: 1,
          takerAssetFilledAmount: 100000000000000,
          makerFeePaid: 0,
          takerFeePaid: 0,
          orderHash:
            '0xb0d28d8c36f40322408b3ff4ac41d2bf6ac6c834633763d3b42831d50e30b455',
          makerAssetData:
            '0x0257179200000000000000000000000006012c8cf97bead5deae237070f9587f8e7a266d00000000000000000000000000000000000000000000000000000000000d29fe',
          takerAssetData:
            '0xf47261b0000000000000000000000000e41d2489571d322189246dafa5ebde1f4699f498',
        },
      },
      logIndex: 91,
      protocolVersion: 2,
      transactionHash:
        '0x266b911f58bc4138616d1e37dcd9829a5f502322b09f99d48d4610e25d6a1e0d',
      type: 'Fill',
      fillCreated: true,
    };

    const normalized = normalizeFillArgs(event.data.args, 2);

    expect(normalized).toMatchSnapshot();
  });
});
